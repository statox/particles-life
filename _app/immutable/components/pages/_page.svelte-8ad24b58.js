import{S as L,i as W,s as H,e as Q,b as U,B as j,h as w,k,q as O,a as A,l as S,m as q,r as z,c as B,n as P,D as g,I as D,J as ee,K as oe,p as te,L as xe,M as ae,N as Te,o as ye,w as X,x as Y,y as Z,u as Ce,f as G,t as J,z as K,O as ke}from"../../chunks/index-9a4d759c.js";const Se=(r,e,n,t,o)=>{const l=Ae(r,t.pos,o.pos),h=n*n;if(l>h)return 0;const s=(2*3)**2;if(l<s)return-1;const d=e[t.color][o.color]??0;return d===0?0:qe(l,h/2,h,0,d)},qe=function(r,e,n,t,o){const l=e+(n-e)/2;return r<l?ne(r,e,l,t,o):ne(r,l,n,o,t)},ne=function(r,e,n,t,o){const l=(r-e)/(n-e)*(o-t)+t;return t<o?ie(l,t,o):ie(l,o,t)},ie=function(r,e,n){return Math.max(Math.min(r,n),e)},Me=()=>({white:{white:Math.floor(Math.random()*4-1),red:Math.floor(Math.random()*4-1),green:Math.floor(Math.random()*4-1),blue:Math.floor(Math.random()*4-1)},red:{white:Math.floor(Math.random()*4-1),red:Math.floor(Math.random()*4-1),green:Math.floor(Math.random()*4-1),blue:Math.floor(Math.random()*4-1)},green:{white:Math.floor(Math.random()*4-1),red:Math.floor(Math.random()*4-1),green:Math.floor(Math.random()*4-1),blue:Math.floor(Math.random()*4-1)},blue:{white:Math.floor(Math.random()*4-1),red:Math.floor(Math.random()*4-1),green:Math.floor(Math.random()*4-1),blue:Math.floor(Math.random()*4-1)}}),ce=[{name:"Negs",description:"Only -1",table:{white:{white:-1,red:-1,green:-1,blue:-1},red:{white:-1,red:-1,green:-1,blue:-1},green:{white:-1,red:-1,green:-1,blue:-1},blue:{white:-1,red:-1,green:-1,blue:-1}}},{name:"Infinite motion",description:"Some very simple patterns of reds chasing whites in a seemlingly infinite randomness",table:{white:{white:-1,red:-1,green:0,blue:-1},red:{white:2,red:-1,green:1,blue:-1},green:{white:0,red:0,green:-1,blue:-1},blue:{white:-1,red:-1,green:-1,blue:-1}}},{name:"No cohesion",description:"Cells of the same color repulse each other",table:{white:{white:-1,red:0,green:0,blue:0},red:{white:0,red:-1,green:0,blue:0},green:{white:0,red:0,green:-1,blue:0},blue:{white:0,red:0,green:0,blue:-1}}},{name:"Spray around",description:"All the cells repulse each others, resulting in an even repartition of the cells",table:{white:{white:-1,red:-1,green:-1,blue:-1},red:{white:-1,red:-1,green:-1,blue:-1},green:{white:-1,red:-1,green:-1,blue:-1},blue:{white:-1,red:-1,green:-1,blue:-1}}},{name:"Simple snake",description:"The colors attract each other in a circular manner creating some moving snakes",table:{white:{white:-1,red:1,green:0,blue:0},red:{white:0,red:-1,green:1,blue:0},green:{white:0,red:0,green:-1,blue:1},blue:{white:1,red:0,green:0,blue:-1}}},{name:"Fishes",description:"The cells regroup in moving structures with white/red head and blue/green tail swimming through the world.",table:{white:{white:0,red:1,green:-1,blue:-2},red:{white:2,red:0,green:1,blue:-1},green:{white:-2,red:-2,green:-2,blue:1},blue:{white:2,red:-1,green:1,blue:-2}}},{name:"Movers and stills",description:"Create some moving objects mainly drivent by green and red and some living but still objects made by white, blue and red. Sometimes the movers grab still objects.",table:{white:{white:1,red:-1,green:0,blue:1},red:{white:2,red:1,green:2,blue:-1},green:{white:-1,red:-1,green:1,blue:-1},blue:{white:1,red:2,green:0,blue:0}}},{name:"White pushers",description:"Create movers propelled by groups of white cells",table:{white:{white:1,red:1,green:2,blue:-1},red:{white:0,red:-1,green:2,blue:2},green:{white:-1,red:0,green:-1,blue:2},blue:{white:-1,red:1,green:1,blue:-1}}},{name:"Large vessels",description:"Create large gliders with branches. The cells are ordered white, blue, red green",table:{white:{white:0,red:1,green:0,blue:2},red:{white:0,red:1,green:1,blue:-1},green:{white:-1,red:1,green:0,blue:1},blue:{white:-1,red:2,green:2,blue:2}}},{name:"Universe",description:"Galaxies with blue center, red and white rings turning around evolving in a green goo",table:{white:{white:-1,red:1,green:1,blue:1},red:{white:-1,red:-1,green:-1,blue:2},green:{white:-2,red:-1,green:0,blue:-1},blue:{white:1,red:2,green:-2,blue:2}}}];class Ee{squares;squareByCellId;worldSize;maxAttractionRadius;constructor(e){const{worldSize:n,maxAttractionRadius:t}=e;if(n.x%t!==0||n.y%t!==0)throw new Error("Screen size is not a multiple of maxAttractionRadius");this.worldSize={...n},this.maxAttractionRadius=t,this.squareByCellId=new Map,this.squares=[];const o=t,l=n.x/o,h=n.y/o;for(let a=0;a<h;a++){this.squares.push([]);for(let s=0;s<l;s++)this.squares[a].push(new Set)}}checkCoord(e){if(e.x<0||e.x>this.worldSize.x||e.y<0||e.y>this.worldSize.y)throw new Error(`The cell at position ${e.x},${e.y} is outside of the screen ${this.worldSize.x},${this.worldSize.y} `)}getSquareCoords(e){return this.checkCoord(e),{x:Math.floor(e.x*this.squares[0].length/this.worldSize.x),y:Math.floor(e.y*this.squares.length/this.worldSize.y)}}insert(e){if(this.squareByCellId.get(e.id))throw new Error("Cell already in map");const n=this.getSquareCoords(e.pos);this.squares[n.y][n.x].add(e.id),this.squareByCellId.set(e.id,n)}updateCell(e){this.checkCoord(e.pos);const n=this.squareByCellId.get(e.id);if(!n)throw new Error("Cell not in map");this.squares[n.y][n.x].delete(e.id);const t=this.getSquareCoords(e.pos);this.squares[t.y][t.x].add(e.id),this.squareByCellId.set(e.id,t)}getNeighborsIds(e){const n=this.squareByCellId.get(e.id);if(!n)throw new Error("Cell not in map");const{x:t,y:o}=n,l=t===0?this.squares[0].length-1:t-1,h=t===this.squares[0].length-1?0:t+1,a=o===0?this.squares.length-1:o-1,s=o===this.squares.length-1?0:o+1,d=[{x:l,y:a},{x:t,y:a},{x:h,y:a},{x:l,y:o},{x:t,y:o},{x:h,y:o},{x:l,y:s},{x:t,y:s},{x:h,y:s}],u=[];for(const{x:i,y:f}of d)u.push(...this.squares[f][i]);return u}}const he=["white","red","green","blue"],Ie=()=>{const r=Math.floor(Math.random()*he.length);return he[r]},Ne=(r,e,n)=>{const t=[],o=new Ee({worldSize:r,maxAttractionRadius:n});for(let l=0;l<e;l++){const h={id:l,pos:{x:Math.random()*r.x,y:Math.random()*r.y},vel:{x:0,y:0},color:Ie()};t.push(h),o.insert(h)}return{cells:t,cellsMap:o}},Ae=(r,e,n)=>{let t=Math.abs(n.x-e.x);t>r.x/2&&(t=r.x-t);let o=Math.abs(n.y-e.y);return o>r.y/2&&(o=r.y-o),t*t+o*o},Be=(r,e)=>{const n=Math.abs(e.x-r.x),t=Math.abs(e.y-r.y);return n*n+t*t},Oe=(r,e,n,t)=>{for(let o=0;o<n.length;o++){const l=n[o];l.vel={x:0,y:0};const h=t.getNeighborsIds(l);for(const s of h){if(o===s)continue;const d=n[s];let u=Se(t.worldSize,r,e,l,d);Be(l.pos,d.pos)>t.worldSize.y*t.worldSize.y/2&&(u*=-1);const i={x:d.pos.x-l.pos.x,y:d.pos.y-l.pos.y},f=Math.sqrt(i.x*i.x+i.y*i.y);if(f===0)continue;const y={x:i.x*(1/f),y:i.y*(1/f)},v={x:y.x*u,y:y.y*u};l.vel.x+=v.x,l.vel.y+=v.y}const a=Math.sqrt(l.vel.x*l.vel.x+l.vel.y*l.vel.y);a!==0&&(l.vel.x*=1/a,l.vel.y*=1/a,ze(t.worldSize,l),t.updateCell(l))}},ze=(r,e)=>{e.pos.x+=e.vel.x,e.pos.y+=e.vel.y,e.pos.x<=0?e.pos.x=r.x+e.pos.x:e.pos.x>=r.x&&(e.pos.x=e.pos.x-r.x),e.pos.y<=0?e.pos.y=r.y+e.pos.y:e.pos.y>=r.y&&(e.pos.y=e.pos.y-r.y)};function ue(r,e,n){const t=r.slice();return t[13]=e[n],t}function de(r,e,n){const t=r.slice();t[16]=e[n];const o=t[1].get(t[0][t[13]][t[16]]);return t[17]=o,t}function fe(r,e,n){const t=r.slice();return t[17]=e[n],t}function be(r){let e,n,t,o,l,h,a,s,d,u,i,f,y,v,T,c,b,p=r[2],x=[];for(let m=0;m<p.length;m+=1)x[m]=ge(fe(r,p,m));let N=r[2],C=[];for(let m=0;m<N.length;m+=1)C[m]=pe(ue(r,N,m));return{c(){e=k("div"),n=k("button"),t=O("Randomize table"),o=A(),l=k("button"),h=O("Zero table"),a=A(),s=k("button"),d=O("Mutate table"),u=A(),i=k("div"),f=k("span"),y=O("Attraction"),v=A();for(let m=0;m<x.length;m+=1)x[m].c();T=A();for(let m=0;m<C.length;m+=1)C[m].c();this.h()},l(m){e=S(m,"DIV",{});var E=q(e);n=S(E,"BUTTON",{});var _=q(n);t=z(_,"Randomize table"),_.forEach(w),o=B(E),l=S(E,"BUTTON",{});var M=q(l);h=z(M,"Zero table"),M.forEach(w),a=B(E),s=S(E,"BUTTON",{});var R=q(s);d=z(R,"Mutate table"),R.forEach(w),E.forEach(w),u=B(m),i=S(m,"DIV",{class:!0});var I=q(i);f=S(I,"SPAN",{});var $=q(f);y=z($,"Attraction"),$.forEach(w),v=B(I);for(let V=0;V<x.length;V+=1)x[V].l(I);T=B(I);for(let V=0;V<C.length;V+=1)C[V].l(I);I.forEach(w),this.h()},h(){P(i,"class","grid5cols svelte-41p0gs")},m(m,E){U(m,e,E),g(e,n),g(n,t),g(e,o),g(e,l),g(l,h),g(e,a),g(e,s),g(s,d),U(m,u,E),U(m,i,E),g(i,f),g(f,y),g(i,v);for(let _=0;_<x.length;_+=1)x[_].m(i,null);g(i,T);for(let _=0;_<C.length;_+=1)C[_].m(i,null);c||(b=[D(n,"click",r[6]),D(l,"click",r[8]),D(s,"click",r[7])],c=!0)},p(m,E){if(E&4){p=m[2];let _;for(_=0;_<p.length;_+=1){const M=fe(m,p,_);x[_]?x[_].p(M,E):(x[_]=ge(M),x[_].c(),x[_].m(i,T))}for(;_<x.length;_+=1)x[_].d(1);x.length=p.length}if(E&63){N=m[2];let _;for(_=0;_<N.length;_+=1){const M=ue(m,N,_);C[_]?C[_].p(M,E):(C[_]=pe(M),C[_].c(),C[_].m(i,null))}for(;_<C.length;_+=1)C[_].d(1);C.length=N.length}},d(m){m&&w(e),m&&w(u),m&&w(i),ee(x,m),ee(C,m),c=!1,oe(b)}}}function ge(r){let e,n=r[17]+"",t;return{c(){e=k("button"),t=O(n),this.h()},l(o){e=S(o,"BUTTON",{style:!0});var l=q(e);t=z(l,n),l.forEach(w),this.h()},h(){te(e,"background-color",r[17]),e.disabled=!0},m(o,l){U(o,e,l),g(e,t)},p:j,d(o){o&&w(e)}}}function me(r){let e,n,t,o,l,h,a,s,d,u,i;function f(){return r[10](r[13],r[16])}function y(){return r[11](r[13],r[16])}function v(){return r[12](r[13],r[16])}return{c(){e=k("span"),n=k("button"),t=O("-"),o=A(),l=k("button"),h=A(),a=k("button"),s=O("+"),d=A(),this.h()},l(T){e=S(T,"SPAN",{class:!0});var c=q(e);n=S(c,"BUTTON",{});var b=q(n);t=z(b,"-"),b.forEach(w),o=B(c),l=S(c,"BUTTON",{style:!0}),q(l).forEach(w),h=B(c),a=S(c,"BUTTON",{});var p=q(a);s=z(p,"+"),p.forEach(w),d=B(c),c.forEach(w),this.h()},h(){te(l,"background-color",r[17]),P(e,"class","grid1row3cols svelte-41p0gs")},m(T,c){U(T,e,c),g(e,n),g(n,t),g(e,o),g(e,l),g(e,h),g(e,a),g(a,s),g(e,d),u||(i=[D(n,"click",f),D(l,"click",y),D(a,"click",v)],u=!0)},p(T,c){r=T,c&1&&te(l,"background-color",r[17])},d(T){T&&w(e),u=!1,oe(i)}}}function pe(r){let e,n=r[13]+"",t,o,l,h=r[2],a=[];for(let s=0;s<h.length;s+=1)a[s]=me(de(r,h,s));return{c(){e=k("button"),t=O(n),o=A();for(let s=0;s<a.length;s+=1)a[s].c();l=Q(),this.h()},l(s){e=S(s,"BUTTON",{style:!0});var d=q(e);t=z(d,n),d.forEach(w),o=B(s);for(let u=0;u<a.length;u+=1)a[u].l(s);l=Q(),this.h()},h(){te(e,"background-color",r[13]),e.disabled=!0},m(s,d){U(s,e,d),g(e,t),U(s,o,d);for(let u=0;u<a.length;u+=1)a[u].m(s,d);U(s,l,d)},p(s,d){if(d&63){h=s[2];let u;for(u=0;u<h.length;u+=1){const i=de(s,h,u);a[u]?a[u].p(i,d):(a[u]=me(i),a[u].c(),a[u].m(l.parentNode,l))}for(;u<a.length;u+=1)a[u].d(1);a.length=h.length}},d(s){s&&w(e),s&&w(o),ee(a,s),s&&w(l)}}}function Re(r){let e,n=r[0]&&be(r);return{c(){n&&n.c(),e=Q()},l(t){n&&n.l(t),e=Q()},m(t,o){n&&n.m(t,o),U(t,e,o)},p(t,[o]){t[0]?n?n.p(t,o):(n=be(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:j,o:j,d(t){n&&n.d(t),t&&w(e)}}}function Ue(r,e,n){let{attractionTable:t}=e,{onUpdateTable:o}=e;const l=new Map([[-2,"#ff0000"],[-1,"#ff7d7d"],[0,"#000000"],[1,"#7dff7d"],[2,"#00ff00"]]),h=["white","red","green","blue"],a=(c,b)=>{let p=t[c][b];p++,p===3&&(p=-2),n(0,t[c][b]=p,t),o(t)},s=(c,b)=>{let p=t[c][b];p++,p===3&&(p=2),n(0,t[c][b]=p,t),o(t)},d=(c,b)=>{let p=t[c][b];p--,p===-3&&(p=-2),n(0,t[c][b]=p,t),o(t)},u=()=>{for(const c of Object.keys(t))for(const b of Object.keys(t[c])){const p=Math.floor(Math.random()*5)-2;n(0,t[c][b]=p,t)}o(t)},i=()=>{const c=Math.floor(Math.random()*h.length),b=h[c],p=Math.floor(Math.random()*h.length),x=h[p],N=Math.floor(Math.random()*5)-2;n(0,t[b][x]=N,t),o(t)},f=()=>{for(const c of Object.keys(t))for(const b of Object.keys(t[c]))n(0,t[c][b]=0,t);o(t)},y=(c,b)=>d(c,b),v=(c,b)=>a(c,b),T=(c,b)=>s(c,b);return r.$$set=c=>{"attractionTable"in c&&n(0,t=c.attractionTable),"onUpdateTable"in c&&n(9,o=c.onUpdateTable)},[t,l,h,a,s,d,u,i,f,o,y,v,T]}class $e extends L{constructor(e){super(),W(this,e,Ue,Re,H,{attractionTable:0,onUpdateTable:9})}}function _e(r,e,n){const t=r.slice();return t[4]=e[n],t}function we(r){let e,n=r[4].name+"",t,o,l=r[4].description+"",h,a;return{c(){e=k("option"),t=O(n),o=O(` -
                `),h=O(l),a=A(),this.h()},l(s){e=S(s,"OPTION",{});var d=q(e);t=z(d,n),o=z(d,` -
                `),h=z(d,l),a=B(d),d.forEach(w),this.h()},h(){e.__value=r[4].table,e.value=e.__value},m(s,d){U(s,e,d),g(e,t),g(e,o),g(e,h),g(e,a)},p:j,d(s){s&&w(e)}}}function De(r){let e,n,t,o,l,h,a,s,d,u=ce,i=[];for(let f=0;f<u.length;f+=1)i[f]=we(_e(r,u,f));return{c(){e=k("div"),n=k("label"),t=O("Select a new attraction table"),o=A(),l=k("select"),h=k("option"),a=O("Random - A randomly generated table");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=S(f,"DIV",{});var y=q(e);n=S(y,"LABEL",{for:!0});var v=q(n);t=z(v,"Select a new attraction table"),v.forEach(w),o=B(y),l=S(y,"SELECT",{});var T=q(l);h=S(T,"OPTION",{});var c=q(h);a=z(c,"Random - A randomly generated table"),c.forEach(w);for(let b=0;b<i.length;b+=1)i[b].l(T);T.forEach(w),y.forEach(w),this.h()},h(){P(n,"for","tables"),h.__value=Me(),h.value=h.__value,r[1]===void 0&&xe(()=>r[2].call(l))},m(f,y){U(f,e,y),g(e,n),g(n,t),g(e,o),g(e,l),g(l,h),g(h,a);for(let v=0;v<i.length;v+=1)i[v].m(l,null);ae(l,r[1]),s||(d=[D(l,"change",r[2]),D(l,"change",r[3])],s=!0)},p(f,[y]){if(y&0){u=ce;let v;for(v=0;v<u.length;v+=1){const T=_e(f,u,v);i[v]?i[v].p(T,y):(i[v]=we(T),i[v].c(),i[v].m(l,null))}for(;v<i.length;v+=1)i[v].d(1);i.length=u.length}y&2&&ae(l,f[1])},i:j,o:j,d(f){f&&w(e),ee(i,f),s=!1,oe(d)}}}function Ve(r,e,n){let t,{updateTable:o}=e;function l(){t=Te(this),n(1,t)}const h=()=>o(t);return r.$$set=a=>{"updateTable"in a&&n(0,o=a.updateTable)},[o,t,l,h]}class je extends L{constructor(e){super(),W(this,e,Ve,De,H,{updateTable:0})}}function Pe(r){let e,n;return{c(){e=k("div"),n=k("canvas"),this.h()},l(t){e=S(t,"DIV",{class:!0});var o=q(e);n=S(o,"CANVAS",{id:!0,class:!0}),q(n).forEach(w),o.forEach(w),this.h()},h(){P(n,"id","canvas"),P(n,"class","svelte-bkdgvm"),P(e,"class","container svelte-bkdgvm")},m(t,o){U(t,e,o),g(e,n)},p:j,i:j,o:j,d(t){t&&w(e)}}}const F=3;function Fe(r,e,n){let{cells:t}=e,{worldSize:o}=e,l;const h=["white","red","green","blue"],a={white:0,red:1,green:2,blue:3},s=h.length,d=F*2;function u(){const i=document.getElementById("canvas");if(!i||!l)throw new Error("Canvas is not ready");const f=i.getContext("2d");if(!f)throw new Error("Ctx is not ready");if(f.fillStyle="#040411",f.fillRect(0,0,i.width,i.height),!t?.length){window.requestAnimationFrame(u);return}const y=3,v=[...t].sort((c,b)=>a[c.color]-a[b.color]);for(let c=0;c<v.length;c++){const b=v[c],p=Math.floor(ne(b.pos.x,0,o.x,0,i.width)),x=Math.floor(ne(b.pos.y,0,o.y,0,i.height));(c===0||b.color!==v[c-1].color)&&(f.fill(),f.fillStyle=b.color),f.beginPath(),f.arc(p,x,y,0,2*Math.PI),f.closePath();var T=a[b.color];const N=T*d,C=0,m=d,E=d,_=p-F,M=x-F,R=d,I=d;f.drawImage(l,N,C,m,E,_,M,R,I)}f.fill(),window.requestAnimationFrame(u)}return ye(()=>{const i=document.getElementById("canvas");if(!i)throw new Error("Canvas is not ready");i.width=1600,i.height=960,l=document.createElement("canvas"),l.width=s*d,l.height=d;const f=l.getContext("2d");if(!f)throw new Error("Offscreen canvas is not ready");for(var y=0;y<s;++y)f.fillStyle=h[y],f.beginPath(),f.arc(y*d+F,F,F,0,2*Math.PI),f.closePath(),f.fill();window.requestAnimationFrame(u)}),r.$$set=i=>{"cells"in i&&n(0,t=i.cells),"worldSize"in i&&n(1,o=i.worldSize)},[t,o]}class Le extends L{constructor(e){super(),W(this,e,Fe,Pe,H,{cells:0,worldSize:1})}}function We(r){let e,n,t,o,l,h,a=r[3].pause?"Run":"Pause",s,d,u,i,f,y,v,T,c,b,p,x,N,C,m,E,_;return n=new Le({props:{cells:r[0],worldSize:r[1]?.worldSize}}),x=new je({props:{updateTable:r[5]}}),C=new $e({props:{attractionTable:r[2],onUpdateTable:r[5]}}),{c(){e=k("div"),X(n.$$.fragment),t=A(),o=k("div"),l=k("div"),h=k("button"),s=O(a),d=A(),u=k("button"),i=O("Reset cells"),f=A(),y=k("button"),v=O("Rainbow"),T=A(),c=k("button"),b=O("Center"),p=A(),X(x.$$.fragment),N=A(),X(C.$$.fragment),this.h()},l(M){e=S(M,"DIV",{class:!0});var R=q(e);Y(n.$$.fragment,R),R.forEach(w),t=B(M),o=S(M,"DIV",{});var I=q(o);l=S(I,"DIV",{});var $=q(l);h=S($,"BUTTON",{});var V=q(h);s=z(V,a),V.forEach(w),d=B($),u=S($,"BUTTON",{});var re=q(u);i=z(re,"Reset cells"),re.forEach(w),f=B($),y=S($,"BUTTON",{});var le=q(y);v=z(le,"Rainbow"),le.forEach(w),T=B($),c=S($,"BUTTON",{});var se=q(c);b=z(se,"Center"),se.forEach(w),$.forEach(w),p=B(I),Y(x.$$.fragment,I),N=B(I),Y(C.$$.fragment,I),I.forEach(w),this.h()},h(){P(e,"class","d-flex justify-content-center")},m(M,R){U(M,e,R),Z(n,e,null),U(M,t,R),U(M,o,R),g(o,l),g(l,h),g(h,s),g(l,d),g(l,u),g(u,i),g(l,f),g(l,y),g(y,v),g(l,T),g(l,c),g(c,b),g(o,p),Z(x,o,null),g(o,N),Z(C,o,null),m=!0,E||(_=[D(h,"click",r[8]),D(u,"click",r[4]),D(y,"click",r[6]),D(c,"click",r[7])],E=!0)},p(M,[R]){const I={};R&1&&(I.cells=M[0]),R&2&&(I.worldSize=M[1]?.worldSize),n.$set(I),(!m||R&8)&&a!==(a=M[3].pause?"Run":"Pause")&&Ce(s,a);const $={};R&4&&($.attractionTable=M[2]),C.$set($)},i(M){m||(G(n.$$.fragment,M),G(x.$$.fragment,M),G(C.$$.fragment,M),m=!0)},o(M){J(n.$$.fragment,M),J(x.$$.fragment,M),J(C.$$.fragment,M),m=!1},d(M){M&&w(e),K(n),M&&w(t),M&&w(o),K(x),K(C),E=!1,oe(_)}}}const ve=32;function He(r,e,n){let t,o,l,h;const a={pause:!1},s={x:1600,y:960},d=()=>{const c=Ne(s,2e3,ve);n(0,o=c.cells),n(1,l=c.cellsMap)};let u;const i=()=>{a.pause===!1&&Oe(h,ve,o,l),u=setTimeout(i,1)},f=c=>{n(2,h=c)},y=()=>{const c=["white","red","green","blue"],b=s.x/4;for(const p of o){const x=Math.floor(p.pos.x/b),N=c[x];p.color=N}},v=()=>{for(const c of o){const b=2*Math.random(),p=Math.random()*2*Math.PI,x=s.x/2+b*Math.cos(p),N=s.y/2+b*Math.sin(p);c.pos={x,y:N}}};return ye(()=>{d(),n(2,h=Me()),i()}),ke(()=>{t?.remove(),clearTimeout(u)}),[o,l,h,a,d,f,y,v,()=>n(3,a.pause=!a.pause,a)]}class Xe extends L{constructor(e){super(),W(this,e,He,We,H,{})}}function Ye(r){let e,n;return e=new Xe({}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,o){Z(e,t,o),n=!0},p:j,i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}class Ge extends L{constructor(e){super(),W(this,e,null,Ye,H,{})}}export{Ge as default};
