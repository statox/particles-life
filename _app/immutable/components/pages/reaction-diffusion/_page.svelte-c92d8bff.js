import{S,i as L,s as W,k as R,l as C,m as I,h as p,n as k,b as w,X as it,B as D,Y as at,o as nt,w as b,x as A,y as x,f as $,t as _,z as y,a as N,e as T,c as V,g as O,d as F,L as ot,q as P,r as X,D as Y,v as q}from"../../../chunks/index-2f3b6d71.js";import{T as lt,a as ft,b as rt,c as st}from"../../../chunks/TabPanel-e2218539.js";import{_ as ht}from"../../../chunks/preload-helper-41c905a7.js";import{R as ut}from"../../../chunks/regl-89b00fbf.js";function gt(c){let e,n,t;return{c(){e=R("div"),this.h()},l(o){e=C(o,"DIV",{style:!0,class:!0}),I(e).forEach(p),this.h()},h(){k(e,"style",c[0]),k(e,"class","m-0")},m(o,r){w(o,e,r),n||(t=it(c[1].call(null,e)),n=!0)},p(o,[r]){r&1&&k(e,"style",o[0])},i:D,o:D,d(o){o&&p(e),n=!1,t()}}}function dt(c,e){return e.forEach(([n,t])=>c[n]=t),c}function $t(c,e,n){let{target:t=void 0}=e,{sketch:o=void 0}=e,{parentDivStyle:r="display: block;"}=e,{debug:s=!1}=e,f;const i=at(),h={ref(){i("ref",t)},instance(){i("instance",f)}};function a(l){return n(2,t=l),{destroy(){n(2,t=void 0)}}}return nt(async()=>{const l=await ht(()=>import("../../../chunks/p5.min-b96f42d1.js").then(v=>v.p),["../../../chunks/p5.min-b96f42d1.js","../../../chunks/regl-89b00fbf.js"],import.meta.url),{default:m}=l,u=Object.entries(l).filter(([v,ct])=>ct instanceof Function&&v[0]!=="_"&&v!=="default");s&&console.log("available p5 native classes",u),f=new m(v=>(v=dt(v,u),s&&console.log("p5 instance",v),window._p5Instance=v,o(v)),t),h.ref(),h.instance()}),c.$$set=l=>{"target"in l&&n(2,t=l.target),"sketch"in l&&n(3,o=l.sketch),"parentDivStyle"in l&&n(0,r=l.parentDivStyle),"debug"in l&&n(4,s=l.debug)},[r,a,t,o,s]}class j extends S{constructor(e){super(),L(this,e,$t,gt,W,{target:2,sketch:3,parentDivStyle:0,debug:4})}}const mt=c=>{const e=[];for(let s=0;s<c.height;s++){e.push([]);for(let f=0;f<c.width;f++)e[e.length-1].push({A:1,B:0})}const n=5,t=5,o=Math.floor(c.width/2),r=Math.floor(c.height/2);for(let s=r-t;s<r+t;s++)for(let f=o-n;f<o+n;f++)e[s][f].B=1;return e},pt=(c,e)=>{const n={width:c.width/e[0].length,height:c.height/e.length};for(let t=0;t<e.length;t++)for(let o=0;o<e[0].length;o++){const{A:r,B:s}=e[t][o];c.fill(r*255,s*255,0),c.rect(o*n.width,t*n.height,n.width,n.height)}},_t=1,vt=.5,z=.055,wt=.062,bt=c=>{const e=[];for(let n=0;n<c.length;n++){e.push([]);for(let t=0;t<c[0].length;t++){const{A:o,B:r}=c[n][t],s=G(c,{x:t,y:n},"A"),f=G(c,{x:t,y:n},"B"),i=o+(_t*s-o*r*r+z*(1-o)),h=r+(vt*f+o*r*r-(wt+z)*r);e[n].push({A:i,B:h})}}return e},G=(c,e,n)=>{const t=xt(c,e);let o=0;for(const r of t){const{coord:s,weight:f}=r;o+=c[s.y][s.x][n]*f}return o},xt=(c,e)=>{const{x:n,y:t}=e,o=c[0].length,r=c.length,s={coord:{x:n>0?n-1:o-1,y:t>0?t-1:r-1},weight:.05},f={coord:{x:n,y:t>0?t-1:r-1},weight:.2},i={coord:{x:n<o-1?n+1:0,y:t>0?t-1:r-1},weight:.05},h={coord:{x:n>0?n-1:o-1,y:t},weight:.2},a={coord:{x:n,y:t},weight:-1},l={coord:{x:n<o-1?n+1:0,y:t},weight:.2},m={coord:{x:n>0?n-1:o-1,y:t<r-1?t+1:0},weight:.05},B={coord:{x:n,y:t<r-1?t+1:0},weight:.2},u={coord:{x:n<o-1?n+1:0,y:t<r-1?t+1:0},weight:.05};return[s,f,i,h,a,l,m,B,u]};function yt(c){let e,n;return e=new j({props:{sketch:c[0]}}),{c(){b(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,o){x(e,t,o),n=!0},p:D,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Dt(c){const e={width:200,height:200};let n;return[o=>{let r;o.setup=()=>{n=o,o.createCanvas(500,500),o.noStroke(),r=mt(e)},o.draw=()=>{o.background(0);for(let s=0;s<20;s++)r=bt(r);pt(n,r)}}]}let At=class extends S{constructor(e){super(),L(this,e,Dt,yt,W,{})}},g,M;const Bt=c=>{g=[],M=[];for(let r=0;r<c.height;r++){g.push([]),M.push([]);for(let s=0;s<c.width;s++)g[g.length-1].push({A:1,B:0}),M[g.length-1].push({A:1,B:0})}const e=5,n=5,t=Math.floor(c.width/2),o=Math.floor(c.height/2);for(let r=o-n;r<o+n;r++)for(let s=t-e;s<t+e;s++)g[r][s].B=1;return g},kt=c=>{const e={width:c.width/g[0].length,height:c.height/g.length};for(let n=0;n<g.length;n++)for(let t=0;t<g[0].length;t++){const{A:o,B:r}=g[n][t];c.fill(o*255,r*255,0),c.rect(t*e.width,n*e.height,e.width,e.height)}},St=1,Lt=.5,H=.055,Wt=.062,Mt=()=>{for(let e=0;e<g.length;e++)for(let n=0;n<g[0].length;n++){const{A:t,B:o}=g[e][n],r=Q(g,{x:n,y:e},"A"),s=Q(g,{x:n,y:e},"B"),f=t+(St*r-t*o*o+H*(1-t)),i=o+(Lt*s+t*o*o-(Wt+H)*o);M[e][n]={A:f,B:i}}const c=g;return g=M,M=c,g},Q=(c,e,n)=>{const t=Et(c,e);let o=0;for(const r of t){const{coord:s,weight:f}=r;o+=c[s.y][s.x][n]*f}return o},Et=(c,e)=>{const{x:n,y:t}=e,o=c[0].length,r=c.length,s={coord:{x:n>0?n-1:o-1,y:t>0?t-1:r-1},weight:.05},f={coord:{x:n,y:t>0?t-1:r-1},weight:.2},i={coord:{x:n<o-1?n+1:0,y:t>0?t-1:r-1},weight:.05},h={coord:{x:n>0?n-1:o-1,y:t},weight:.2},a={coord:{x:n,y:t},weight:-1},l={coord:{x:n<o-1?n+1:0,y:t},weight:.2},m={coord:{x:n>0?n-1:o-1,y:t<r-1?t+1:0},weight:.05},B={coord:{x:n,y:t<r-1?t+1:0},weight:.2},u={coord:{x:n<o-1?n+1:0,y:t<r-1?t+1:0},weight:.05};return[s,f,i,h,a,l,m,B,u]};function Rt(c){let e,n;return e=new j({props:{sketch:c[0]}}),{c(){b(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,o){x(e,t,o),n=!0},p:D,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Ct(c){const e={width:200,height:200};let n;return[o=>{o.setup=()=>{n=o,o.createCanvas(500,500),o.noStroke(),Bt(e)},o.draw=()=>{for(let r=0;r<5;r++)Mt();kt(n)}}]}let It=class extends S{constructor(e){super(),L(this,e,Ct,Rt,W,{})}},d,E;const Nt=c=>{d=[],E=[];for(let r=0;r<c.height;r++){d.push([]),E.push([]);for(let s=0;s<c.width;s++)d[d.length-1].push({A:1,B:0}),E[d.length-1].push({A:1,B:0})}const e=5,n=5,t=Math.floor(c.width/2),o=Math.floor(c.height/2);for(let r=o-n;r<o+n;r++)for(let s=t-e;s<t+e;s++)d[r][s].B=1;return d},Tt=c=>{const e={width:c.width/d[0].length,height:c.height/d.length};for(let n=0;n<d.length;n++)for(let t=0;t<d[0].length;t++){const{A:o,B:r}=d[n][t];c.fill(o*255,r*255,0),c.rect(t*e.width,n*e.height,e.width,e.height)}},Vt=1,Pt=.5,U=.055,Xt=.062,Yt=()=>{for(let e=0;e<d.length;e++)for(let n=0;n<d[0].length;n++){const{A:t,B:o}=d[e][n],r=J(d,{x:n,y:e},"A"),s=J(d,{x:n,y:e},"B"),f=t+(Vt*r-t*o*o+U*(1-t)),i=o+(Pt*s+t*o*o-(Xt+U)*o);E[e][n]={A:f,B:i}}const c=d;return d=E,E=c,d},J=(c,e,n)=>{const t=Ot(c,e);let o=0;for(const r of t){const{coord:s,weight:f}=r;o+=c[s.y][s.x][n]*f}return o},Ot=(c,e)=>{const{x:n,y:t}=e,o=c[0].length,r=c.length,s={coord:{x:n>0?n-1:o-1,y:t>0?t-1:r-1},weight:.05},f={coord:{x:n,y:t>0?t-1:r-1},weight:.2},i={coord:{x:n<o-1?n+1:0,y:t>0?t-1:r-1},weight:.05},h={coord:{x:n>0?n-1:o-1,y:t},weight:.2},a={coord:{x:n,y:t},weight:-1},l={coord:{x:n<o-1?n+1:0,y:t},weight:.2},m={coord:{x:n>0?n-1:o-1,y:t<r-1?t+1:0},weight:.05},B={coord:{x:n,y:t<r-1?t+1:0},weight:.2},u={coord:{x:n<o-1?n+1:0,y:t<r-1?t+1:0},weight:.05};return[s,f,i,h,a,l,m,B,u]};function Ft(c){let e,n;return e=new j({props:{sketch:c[0]}}),{c(){b(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,o){x(e,t,o),n=!0},p:D,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function jt(c){const e={width:200,height:200};let n;return[o=>{o.setup=()=>{n=o,o.createCanvas(500,500),o.noStroke(),Nt(e)},o.draw=()=>{for(let r=0;r<5;r++)Yt();Tt(n)}}]}let qt=class extends S{constructor(e){super(),L(this,e,jt,Ft,W,{})}};function zt(c){let e;return{c(){e=R("canvas"),this.h()},l(n){e=C(n,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),I(e).forEach(p),this.h()},h(){k(e,"id","canvas"),k(e,"width",c[0].width),k(e,"height",c[0].height),k(e,"class","svelte-1b0ol19")},m(n,t){w(n,e,t)},p:D,i:D,o:D,d(n){n&&p(e)}}}function Gt(c){const e={width:window.innerWidth-50,height:window.innerHeight-10},n=2**10,t=n*.05,o=Array(n*n).fill(0).map((r,s)=>{const f=Math.floor(s/n),i=s%n;return Math.hypot(n/2-i,n/2-f)<t?[0,1,0,1]:Math.random()<.01?[0,1,0,1]:[1,0,0,1]}).flat();return nt(()=>{const r=document.getElementById("canvas");if(!r)throw new Error("Canvas container not ready");const s=ut({extensions:["OES_texture_float"],canvas:r}),f=Array(2).fill(0).map(()=>s.framebuffer({color:s.texture({radius:n,data:o,wrap:"repeat",type:"float"}),depthStencil:!1})),i=s({frag:`
precision mediump float;
uniform sampler2D prevState;
varying vec2 uv;

vec2 laplacianDiff() {
    vec2 r = vec2(0.0, 0.0);

    // top left
    r += texture2D(prevState, uv+vec2(-1,-1)/float(${n})).rg * 0.05;
    // top
    r += texture2D(prevState, uv+vec2(0,-1)/float(${n})).rg * 0.2;
    // top right
    r += texture2D(prevState, uv+vec2(1,-1)/float(${n})).rg * 0.05;

    // left
    r += texture2D(prevState, uv+vec2(-1,0)/float(${n})).rg * 0.2;
    // middle
    r += texture2D(prevState, uv+vec2(0,0)/float(${n})).rg * -1.0;
    // right
    r += texture2D(prevState, uv+vec2(1,0)/float(${n})).rg * 0.2;

    // bottom left
    r += texture2D(prevState, uv+vec2(-1,1)/float(${n})).rg * 0.05;
    // bottom
    r += texture2D(prevState, uv+vec2(0,1)/float(${n})).rg * 0.2;
    // bottom right
    r += texture2D(prevState, uv+vec2(1,1)/float(${n})).rg * 0.05;

    return r;
}

void main() {
    float Da = 1.0;
    float Db = 0.5;
    float f = 0.055;
    float k = 0.062;

    float A = texture2D(prevState, uv).r;
    float B = texture2D(prevState, uv).g;

    vec2 L = laplacianDiff();
    float La = L.r;
    float Lb = L.g;

    float newA = A + ((Da * La) - (A * B * B) + (f * (1.0 - A)));
    float newB = B + ((Db * Lb) + (A * B * B) - ((k + f) * B));

    gl_FragColor = vec4(newA, newB, 0, 1);
}`,framebuffer:({tick:a})=>f[(a+1)%2]}),h=s({frag:`
precision mediump float;
uniform sampler2D prevState;
varying vec2 uv;
void main() {
    vec2 state = texture2D(prevState, uv).rg;
    gl_FragColor = vec4(state, 0, 1);
}`,vert:`
precision mediump float;
attribute vec2 position;
varying vec2 uv;
void main() {
    uv = 0.5 * (position + 1.0);
    gl_Position = vec4(position, 0, 1);
}`,attributes:{position:[-4,-4,4,-4,0,4]},uniforms:{prevState:({tick:a})=>f[a%2]},depth:{enable:!1},count:3});s.frame(()=>{h(()=>{s.draw(),i()})})}),[e]}class Ht extends S{constructor(e){super(),L(this,e,Gt,zt,W,{})}}function K(c,e,n){const t=c.slice();return t[1]=e[n],t}function Z(c,e,n){const t=c.slice();return t[1]=e[n],t}function Qt(c){let e;return{c(){e=P("About")},l(n){e=X(n,"About")},m(n,t){w(n,e,t)},d(n){n&&p(e)}}}function Ut(c){let e=c[1].title+"",n;return{c(){n=P(e)},l(t){n=X(t,e)},m(t,o){w(t,n,o)},p:D,d(t){t&&p(n)}}}function tt(c){let e,n;return e=new st({props:{$$slots:{default:[Ut]},$$scope:{ctx:c}}}),{c(){b(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,o){x(e,t,o),n=!0},p(t,o){const r={};o&64&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function Jt(c){let e,n,t,o;e=new st({props:{$$slots:{default:[Qt]},$$scope:{ctx:c}}});let r=c[0],s=[];for(let i=0;i<r.length;i+=1)s[i]=tt(Z(c,r,i));const f=i=>_(s[i],1,1,()=>{s[i]=null});return{c(){b(e.$$.fragment),n=N();for(let i=0;i<s.length;i+=1)s[i].c();t=T()},l(i){A(e.$$.fragment,i),n=V(i);for(let h=0;h<s.length;h+=1)s[h].l(i);t=T()},m(i,h){x(e,i,h),w(i,n,h);for(let a=0;a<s.length;a+=1)s[a].m(i,h);w(i,t,h),o=!0},p(i,h){const a={};if(h&64&&(a.$$scope={dirty:h,ctx:i}),e.$set(a),h&1){r=i[0];let l;for(l=0;l<r.length;l+=1){const m=Z(i,r,l);s[l]?(s[l].p(m,h),$(s[l],1)):(s[l]=tt(m),s[l].c(),$(s[l],1),s[l].m(t.parentNode,t))}for(O(),l=r.length;l<s.length;l+=1)f(l);F()}},i(i){if(!o){$(e.$$.fragment,i);for(let h=0;h<r.length;h+=1)$(s[h]);o=!0}},o(i){_(e.$$.fragment,i),s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)_(s[h]);o=!1},d(i){y(e,i),i&&p(n),ot(s,i),i&&p(t)}}}function Kt(c){let e,n,t,o;return{c(){e=R("p"),n=P("Experiments with "),t=R("a"),o=P("Reaction-diffusion systems"),this.h()},l(r){e=C(r,"P",{});var s=I(e);n=X(s,"Experiments with "),t=C(s,"A",{href:!0,target:!0});var f=I(t);o=X(f,"Reaction-diffusion systems"),f.forEach(p),s.forEach(p),this.h()},h(){k(t,"href","https://en.wikipedia.org/wiki/Reaction%E2%80%93diffusion_system"),k(t,"target","none")},m(r,s){w(r,e,s),Y(e,n),Y(e,t),Y(t,o)},p:D,d(r){r&&p(e)}}}function Zt(c){let e,n,t;var o=c[1].component;function r(s){return{}}return o&&(e=q(o,r())),{c(){e&&b(e.$$.fragment),n=N()},l(s){e&&A(e.$$.fragment,s),n=V(s)},m(s,f){e&&x(e,s,f),w(s,n,f),t=!0},p(s,f){if(o!==(o=s[1].component)){if(e){O();const i=e;_(i.$$.fragment,1,0,()=>{y(i,1)}),F()}o?(e=q(o,r()),b(e.$$.fragment),$(e.$$.fragment,1),x(e,n.parentNode,n)):e=null}},i(s){t||(e&&$(e.$$.fragment,s),t=!0)},o(s){e&&_(e.$$.fragment,s),t=!1},d(s){e&&y(e,s),s&&p(n)}}}function et(c){let e,n;return e=new rt({props:{$$slots:{default:[Zt]},$$scope:{ctx:c}}}),{c(){b(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,o){x(e,t,o),n=!0},p(t,o){const r={};o&64&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function te(c){let e,n,t,o,r,s;e=new ft({props:{$$slots:{default:[Jt]},$$scope:{ctx:c}}}),t=new rt({props:{$$slots:{default:[Kt]},$$scope:{ctx:c}}});let f=c[0],i=[];for(let a=0;a<f.length;a+=1)i[a]=et(K(c,f,a));const h=a=>_(i[a],1,1,()=>{i[a]=null});return{c(){b(e.$$.fragment),n=N(),b(t.$$.fragment),o=N();for(let a=0;a<i.length;a+=1)i[a].c();r=T()},l(a){A(e.$$.fragment,a),n=V(a),A(t.$$.fragment,a),o=V(a);for(let l=0;l<i.length;l+=1)i[l].l(a);r=T()},m(a,l){x(e,a,l),w(a,n,l),x(t,a,l),w(a,o,l);for(let m=0;m<i.length;m+=1)i[m].m(a,l);w(a,r,l),s=!0},p(a,l){const m={};l&64&&(m.$$scope={dirty:l,ctx:a}),e.$set(m);const B={};if(l&64&&(B.$$scope={dirty:l,ctx:a}),t.$set(B),l&1){f=a[0];let u;for(u=0;u<f.length;u+=1){const v=K(a,f,u);i[u]?(i[u].p(v,l),$(i[u],1)):(i[u]=et(v),i[u].c(),$(i[u],1),i[u].m(r.parentNode,r))}for(O(),u=f.length;u<i.length;u+=1)h(u);F()}},i(a){if(!s){$(e.$$.fragment,a),$(t.$$.fragment,a);for(let l=0;l<f.length;l+=1)$(i[l]);s=!0}},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)_(i[l]);s=!1},d(a){y(e,a),a&&p(n),y(t,a),a&&p(o),ot(i,a),a&&p(r)}}}function ee(c){let e,n,t;return n=new lt({props:{$$slots:{default:[te]},$$scope:{ctx:c}}}),{c(){e=R("div"),b(n.$$.fragment)},l(o){e=C(o,"DIV",{});var r=I(e);A(n.$$.fragment,r),r.forEach(p)},m(o,r){w(o,e,r),x(n,e,null),t=!0},p(o,[r]){const s={};r&64&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||($(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&p(e),y(n)}}}function ne(c){return[[{title:"V4",component:Ht},{title:"V3",component:qt},{title:"V2",component:It},{title:"V1",component:At}]]}class oe extends S{constructor(e){super(),L(this,e,ne,ee,W,{})}}function re(c){let e,n;return e=new oe({}),{c(){b(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,o){x(e,t,o),n=!0},p:D,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}class ue extends S{constructor(e){super(),L(this,e,null,re,W,{})}}export{ue as default};
